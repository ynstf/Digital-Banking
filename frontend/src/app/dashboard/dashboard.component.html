<div class="container">
    <div class="cyber-card">
        <div class="cyber-card-header">
            <h2>Dashboard</h2>
        </div>
        <div class="cyber-card-body">
            <!-- Account counts -->
            <div class="account-counts-grid">
                <div class="account-count-card" *ngFor="let item of accountCountByType | keyvalue">
                    <div class="count-card-content">
                        <h5 class="count-title">{{ formatTypeName(item.key) }}</h5>
                        <p class="count-value">{{ item.value }}</p>
                    </div>
                </div>
            </div>

            <!-- Charts Row 1: Pie and Bar -->
            <div class="charts-row">
                <div class="chart-container">
                    <div class="cyber-chart-card">
                        <div class="chart-body">
                            <canvas #pieCanvas></canvas>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <div class="cyber-chart-card">
                        <div class="chart-body">
                            <canvas #barCanvas></canvas>
                            
                            <!-- Average balance doughnut -->
                            <div class="doughnut-section">
                                <div class="cyber-chart-card">
                                    <div class="chart-body">
                                        <h5 class="chart-title">Average Balance by Account Type</h5>
                                        <canvas #doughnutCanvas class="doughnut-canvas"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Line Chart Row -->
            <div class="full-width-chart">
                <div class="cyber-chart-card">
                    <div class="chart-body">
                        <h5 class="chart-title">Account Creations Over Time</h5>
                        <canvas #lineCanvas></canvas>
                    </div>
                </div>
            </div>

            <!-- Weekday Chart -->
            <div class="full-width-chart">
                <div class="cyber-chart-card">
                    <div class="chart-body">
                        <h5 class="chart-title">Volume des transactions par jour</h5>
                        <canvas #weekdayCanvas></canvas>
                    </div>
                </div>
            </div>

            <!-- Top Customers Chart -->
            <div class="full-width-chart">
                <div class="cyber-chart-card">
                    <div class="chart-body">
                        <h5 class="chart-title">Top 5 Customers by Total Balance</h5>
                        <canvas #topCustCanvas></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent Operations Feed -->
            <div class="full-width-chart">
                <div class="cyber-chart-card">
                    <div class="chart-body">
                        <h5 class="chart-title">Recent Operations</h5>
                        <div class="operations-table-container">
                            <table class="cyber-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Account</th>
                                        <th>Customer</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let op of recentOperations">
                                        <td>{{ op.operationDate | date:'short' }}</td>
                                        <td>{{ op.type }}</td>
                                        <td>{{ op.amount | number:'1.2-2' }}</td>
                                        <td>{{ op.accountId }}</td>
                                        <td>{{ op.customerName }}</td>
                                        <td>{{ op.description }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>